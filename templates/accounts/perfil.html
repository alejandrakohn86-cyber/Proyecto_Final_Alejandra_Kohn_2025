{% extends 'base.html' %}

{% block title %}Mi Perfil{% endblock %}

{% block header %}Mi Perfil{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    {% if messages %}
        {% for message in messages %}
            <div style="padding: 10px; margin-bottom: 10px; background-color: #ddffdd; border-radius: 5px;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div style="background-color: #f5f5f5; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
        {% if user.profile.avatar %}
            <div style="text-align: center; margin-bottom: 20px;">
                <img src="{{ user.profile.avatar.url }}" alt="Avatar" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover;">
            </div>
        {% else %}
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="width: 150px; height: 150px; border-radius: 50%; background-color: #ddd; display: inline-flex; align-items: center; justify-content: center; font-size: 50px; color: #666;">
                    {{ user.username.0|upper }}
                </div>
            </div>
        {% endif %}

        <h3 style="text-align: center; margin-bottom: 20px;">{{ user.get_full_name|default:user.username }}</h3>

        <table style="width: 100%; border-collapse: collapse;">
            <tr>
                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd;">Usuario:</td>
                <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ user.username }}</td>
            </tr>
            <tr>
                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd;">Nombre:</td>
                <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ user.first_name|default:"No especificado" }}</td>
            </tr>
            <tr>
                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd;">Apellido:</td>
                <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ user.last_name|default:"No especificado" }}</td>
            </tr>
            <tr>
                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd;">Email:</td>
                <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ user.email|default:"No especificado" }}</td>
            </tr>
            <tr>
                <td style="padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd;">Fecha de nacimiento:</td>
                <td style="padding: 10px; border-bottom: 1px solid #ddd;">{{ user.profile.fecha_nacimiento|date:"d/m/Y"|default:"No especificada" }}</td>
            </tr>
            <tr>
                <td style="padding: 10px; font-weight: bold; vertical-align: top;">Biografía:</td>
                <td style="padding: 10px;">{{ user.profile.biografia|default:"No hay biografía" }}</td>
            </tr>
        </table>
    </div>

    <div style="text-align: center;">
        <a href="{% url 'accounts:editar-perfil' %}" style="background-color: #3c8cf5; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-right: 10px;">Editar Perfil</a>
        <a href="{% url 'accounts:cambiar-password' %}" style="background-color: #f5a623; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">Cambiar Contraseña</a>
    </div>
</div>
{% endblock %}